<!DOCTYPE html>

<html>

<head>
<!--<script src='anno_zy3jKKqAJ3U.json'></script>-->

<!--<script src='anno_zxYXg5vhqjw.json'></script>-->

<!--<script src='anno_6pv2qxbiabc.json'></script>-->

<!--<script src='anno_M2ryDEyyrXE.json'></script>-->

<script src='js/parse.js'></script>

<script src='js/render.js'></script>

<style>

* {
	box-sizing: border-box;
}

#anno_render {
	width: 640px;
	height: 360px;
	background: rgba(200, 200, 200, 0.3);
	
	position: relative;
}

#anno_render * {
	z-index: 100;
}

#anno_render .text_annotation {
	padding: 5px;
	position: absolute;
}

#anno_player_container {
	position: relative;
}

#ytplayer {
	top: 0px;
	position: absolute;
}

html,body{height:100%;}

</style>

</head>

<body>

<input id='disable_anno_button' type="checkbox" name="vehicle1" value="Bike" checked onclick="OnAnnotationEnableBox()">Enable Annotations<br/>
<!--
<button id='restart_button' onclick='RenderAnnotations()'>GO TO START</button>
<button id='pause_play_button'>Pause</button>
-->

<!--<input id='vid_time' type="range" step='0.1' min="0" max="150" value="0"/>-->

<!--<p id='vid_time_label'>0 seconds</p>-->

<!-- NOTE: This is just for local development on chrome...ideally will be done using XHR on a server later-->
<!--<input id='myFile' type='file' oninput='onFileInput()'/>-->

<br/>
<br/>
<br/>

<div id='anno_player_container'>
	<div id="anno_render"></div>

	<div id="ytplayer"></div>
</div>

<!-- TODO -->

<script>
  function PlayYTVideoDirect(vidID) {
	window.bnsYTPlayer = new YT.Player('ytplayer', {
      height: '360',
      width: '640',
      videoId: vidID,
	  enablejsapi: '1',
	  origin: 'localhost:5005',
	  ivLoadPolicy: '3',
	  
	  // TODO: Figure out which of these options are useful
	  controls: '0',
	  modestbranding:'1'
    });
	console.log(window.bnsYTPlayer);
  }

  var vidIDQueued = null;
  var YTAPIReady = false;
  function onYouTubePlayerAPIReady() {
    if (!YTAPIReady) {
	
	  if (vidIDQueued !== null) {
		PlayYTVideoDirect(vidIDQueued);
	  }
	
	  YTAPIReady = true;
	}
  }
  
  function PlayYTVideo(vidID) {
	if (YTAPIReady) {
	  if (window.bnsYTPlayer !== undefined) {
	    window.bnsYTPlayer.loadVideoById(vidID);
	  } else {
		PlayYTVideoDirect(vidID);
	  }
	} else {
	  vidIDQueued = vidID;
	}
  }
  
  // Load the IFrame Player API code asynchronously.
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/player_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  
</script>

</body>

</html>
